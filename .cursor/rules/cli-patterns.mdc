---
globs: src/cli.ts
---

# CLI Patterns

## Argument Parsing

```typescript
const input = args.find(arg => !arg.startsWith('--')) || args[0]
const useRaw = args.includes('--raw')
```

Always extract the file/URL first (non-flag argument), then check for flags.

## Help Text

Must include:
- Usage line with placeholder
- All flags and options
- Multiple examples (local file, YouTube, with flags)
- Current optimizations status
- Supported formats
- Configuration instructions

## Error Messages

Pattern: Always include helpful links and copy-paste commands:

```typescript
throw new Error(
  'OPENAI_API_KEY not found.\n\n' +
  'ğŸ”‘ Get your API key: https://platform.openai.com/api-keys\n\n' +
  'Then set it using ONE of these methods:\n\n' +
  '1ï¸âƒ£  Environment variable...\n' +
  '2ï¸âƒ£  Config file...\n\n' +
  'ğŸ“š Full setup guide: https://github.com/...'
)
```

## Config Resolution

Priority order:
1. Environment variable (`OPENAI_API_KEY`)
2. Config file (`~/.transcribe/config.json`)

Always try both before throwing error.

## Output Format

```typescript
console.log(`\nâœ… SRT file saved to: ${result.srtPath}`)
console.log(`\nTranscription preview:`)
console.log('â”€'.repeat(60))
console.log(result.text.substring(0, 500) + '...')
console.log('â”€'.repeat(60))
console.log(`\nLanguage: ${result.language}`)
console.log(`Duration: ${result.duration.toFixed(2)}s`)
```

Use emoji icons for progress steps: ğŸ¬ ğŸ¥ ğŸ“Š âš¡ ğŸ™ï¸ âœ… â±ï¸ ğŸ§¹